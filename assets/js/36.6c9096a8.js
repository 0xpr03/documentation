(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{404:function(e,t,s){"use strict";s.r(t);var a=s(9),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"relevancy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#relevancy"}},[e._v("#")]),e._v(" Relevancy")]),e._v(" "),s("p",[e._v("Search responses are sorted according to a set of consecutive rules called "),s("strong",[e._v("ranking rules")]),e._v(". When a search query is made, MeiliSearch uses a "),s("RouterLink",{attrs:{to:"/guides/advanced_guides/bucket_sort.html"}},[e._v("bucket sort")]),e._v(" to rank documents. Each rule is applied to all documents that are considered equal according to the previous rule to break the tie.")],1),e._v(" "),s("p",[e._v("Ranking rules are "),s("strong",[e._v("built-in rules applied to the search results")]),e._v(" in order to improve their relevancy. To benefit from the ranking rules and make them meet your dataset and needs, it is important to understand how each of them works and how to create new ones.")]),e._v(" "),s("p",[e._v("For a more in-depth explanation of the algorithm and the default ranking rules, "),s("a",{attrs:{href:"https://github.com/meilisearch/MeiliSearch/issues/358",target:"_blank",rel:"noopener noreferrer"}},[e._v("see this issue"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("h2",{attrs:{id:"ranking-rules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ranking-rules"}},[e._v("#")]),e._v(" Ranking rules")]),e._v(" "),s("p",[e._v("Ranking rules determine which documents are returned upon a search query. Each of them has a special use in finding the right results for a given search query.")]),e._v(" "),s("p",[e._v("The ranking rules are "),s("strong",[e._v("customizable")]),e._v(" which means "),s("strong",[e._v("existing rules can be deleted and new ones can be added")]),e._v(".")]),e._v(" "),s("p",[e._v("The order in which they are applied has a significant impact on the search results. The first rules being the most impactful and the last one the least. The default order has been chosen because it meet most standard needs. "),s("strong",[e._v("This order can be changed in the settings")]),e._v(".")]),e._v(" "),s("p",[e._v("By default, ranking rules are executed in the following order:")]),e._v(" "),s("p",[s("strong",[e._v("1. Typo")]),s("br"),e._v("\nResults are sorted by "),s("strong",[e._v("increasing number of typos")]),e._v(": find documents that match query terms with fewer typos first.")]),e._v(" "),s("p",[s("strong",[e._v("2. Words")]),s("br"),e._v("\nResults are sorted by "),s("strong",[e._v("decreasing number of matched query terms")]),e._v(" in each matching document: find documents that contain more occurrences of the query terms first.")]),e._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),s("p",[e._v("It is now mandatory that all query terms are present in the returned documents. This rule does not impact search results yet. "),s("Badge",{attrs:{text:"soon",type:"warn"}})],1)]),e._v(" "),s("p",[s("strong",[e._v("3. Proximity")]),s("br"),e._v("\nResults are sorted by "),s("strong",[e._v("increasing distance between matched query terms")]),e._v(": find documents that contain more query terms found close together (close proximity between two query terms) and appearing in the original order specified in the query string first.")]),e._v(" "),s("p",[s("strong",[e._v("4. Attribute")]),s("br"),e._v("\nResults are sorted according to "),s("strong",[s("RouterLink",{attrs:{to:"/guides/main_concepts/relevancy.html#importance-of-the-attributes"}},[e._v("the order of importance of the attributes")])],1),e._v(": find documents that contain query terms in more important attributes first.")]),e._v(" "),s("p",[s("strong",[e._v("5. Words Position")]),s("br"),e._v("\nResults are sorted by "),s("strong",[e._v("the position of the query words in the attributes")]),e._v(": find documents that contain query terms earlier in their attributes first.")]),e._v(" "),s("p",[s("strong",[e._v("6. Exactness")]),s("br"),e._v("\nResults are sorted by "),s("strong",[e._v("the similarity of the matched words with the query words")]),e._v(": find documents that contain exactly the same terms as the ones queried first.")]),e._v(" "),s("h4",{attrs:{id:"examples"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#examples"}},[e._v("#")]),e._v(" Examples")]),e._v(" "),s("Tabs",{attrs:{type:"border-card"}},[s("Tab",{attrs:{label:"Typo"}},[s("p",[s("img",{attrs:{src:"/ranking-rules/vogli3.png",alt:"Image from alias"}})]),e._v(" "),s("h3",{attrs:{id:"typo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#typo"}},[e._v("#")]),e._v(" Typo")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("vogli")]),e._v(": 0 typo")]),e._v(" "),s("li",[s("code",[e._v("volli")]),e._v(": 1 typo")])]),e._v(" "),s("p",[e._v("The "),s("code",[e._v("typo")]),e._v(" rule sorts the results by increasing number of typos on matched query words.")])]),e._v(" "),s("Tab",{attrs:{label:"Proximity"}},[s("p",[s("img",{attrs:{src:"/ranking-rules/new_road.png",alt:"Image from alias"}})]),e._v(" "),s("h3",{attrs:{id:"proximity"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#proximity"}},[e._v("#")]),e._v(" Proximity")]),e._v(" "),s("p",[e._v("The reason why "),s("code",[e._v("Creature")]),e._v(" is listed before "),s("code",[e._v("Mississippi Grind")]),e._v(" is because of the "),s("code",[e._v("proximity")]),e._v(" rule."),s("br"),e._v("\nThe smallest "),s("strong",[e._v("distance")]),e._v(" between the matching words in "),s("code",[e._v("creature")]),e._v(" is smaller than the smallest "),s("strong",[e._v("distance")]),e._v(" between the matching words in "),s("code",[e._v("Mississippi Grind")]),e._v(".")]),e._v(" "),s("p",[e._v("The "),s("code",[e._v("proximity")]),e._v(" rule sorts the results by increasing distance between matched query terms.")])]),e._v(" "),s("Tab",{attrs:{label:"Attribute"}},[s("p",[s("img",{attrs:{src:"/ranking-rules/belgium.png",alt:"Image from alias"}})]),e._v(" "),s("h3",{attrs:{id:"attribute"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#attribute"}},[e._v("#")]),e._v(" Attribute")]),e._v(" "),s("p",[s("code",[e._v("If It's Tuesday, This must be Belgium")]),e._v(" is the first document because the matched word "),s("code",[e._v("Belgium")]),e._v(", is found in the "),s("code",[e._v("title")]),e._v(" attribute and not the "),s("code",[e._v("description")]),e._v(".")]),e._v(" "),s("p",[e._v("The "),s("code",[e._v("attribute")]),e._v(" rule sorts the results by "),s("RouterLink",{attrs:{to:"/guides/main_concepts/relevancy.html#importance-of-the-attributes"}},[e._v("attribute importance")]),e._v(".")],1)]),e._v(" "),s("Tab",{attrs:{label:"Words position"}},[s("p",[s("img",{attrs:{src:"/ranking-rules/belgium.png",alt:"Image from alias"}})]),e._v(" "),s("h3",{attrs:{id:"word-position"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#word-position"}},[e._v("#")]),e._v(" Word position")]),e._v(" "),s("p",[s("code",[e._v("Gangsta")]),e._v(" appears before "),s("code",[e._v("Dunkirk")]),e._v(" because "),s("code",[e._v("Belgium")]),e._v(" appears sooner in the attribute.")]),e._v(" "),s("p",[e._v("The "),s("code",[e._v("word position")]),e._v(" rule sorts the results by increasing matching word's index number.")])]),e._v(" "),s("Tab",{attrs:{label:"Exactness"}},[s("p",[s("img",{attrs:{src:"/ranking-rules/knight.png",alt:"Image from alias"}})]),e._v(" "),s("h3",{attrs:{id:"exactness"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exactness"}},[e._v("#")]),e._v(" Exactness")]),e._v(" "),s("p",[s("code",[e._v("Knight Moves")]),e._v(" is displayed before "),s("code",[e._v("Knights of Badassdom")]),e._v(". "),s("code",[e._v("Knight")]),e._v(" is exactly the same as the search query "),s("code",[e._v("Knight")]),e._v(" whereas there is a letter of difference between "),s("code",[e._v("Knights")]),e._v(" and the search query "),s("code",[e._v("Knight")]),e._v(".")])])],1),e._v(" "),s("h2",{attrs:{id:"order-of-the-rules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#order-of-the-rules"}},[e._v("#")]),e._v(" Order of the rules")]),e._v(" "),s("p",[e._v("By default, the built-in rules are executed in the following order to meet most standard needs.")]),e._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"typo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"words"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"proximity"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"attribute"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"wordsPosition"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"exactness"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])])]),s("p",[e._v("Depending on your needs, you might want to change this order of importance. To do so, you can use the "),s("RouterLink",{attrs:{to:"/references/ranking_rules.html#update-ranking-rules"}},[e._v("settings route")]),e._v(" of your index.")],1),e._v(" "),s("h2",{attrs:{id:"adding-your-rules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#adding-your-rules"}},[e._v("#")]),e._v(" Adding your rules")]),e._v(" "),s("p",[e._v("New rules can be added to the existing list at any time and placed anywhere in the sequence.")]),e._v(" "),s("p",[e._v("A custom rule allows you to create an ascending or descending sorting rule on a given attribute. The attribute "),s("strong",[e._v("must have a numeric value")]),e._v(" in the documents. If any value is not a numeric type, the sorting rule won't be applied. Only numbers can be arranged in ascending or descending order.")]),e._v(" "),s("p",[e._v("To add your own ranking rule, you have to communicate either "),s("code",[e._v("asc")]),e._v(" for ascending order or "),s("code",[e._v("desc")]),e._v(" for descending order followed by the field name between round brackets.")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("To apply an "),s("strong",[e._v("ascending sorting")]),e._v(" (results sorted by increasing value of the attribute): "),s("code",[e._v("asc(attribute_name)")])])]),e._v(" "),s("li",[s("p",[e._v("To apply a "),s("strong",[e._v("descending sorting")]),e._v(" (results sorted by decreasing value of the attribute): "),s("code",[e._v("desc(attribute_name)")])])])]),e._v(" "),s("p",[e._v("Add this rule to the existing list of ranking rules using the "),s("RouterLink",{attrs:{to:"/references/ranking_rules.html#update-ranking-rules"}},[e._v("settings route")]),e._v(".")],1),e._v(" "),s("h4",{attrs:{id:"example"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[e._v("#")]),e._v(" Example")]),e._v(" "),s("p",[e._v("Let's say you have a movie dataset. The documents contain the fields "),s("code",[e._v("release_date")]),e._v(" with a timestamp as value, and "),s("code",[e._v("movie_ranking")]),e._v(" an integer that represents its ranking.")]),e._v(" "),s("p",[e._v("The following example will create a rule that makes older movies more relevant than more recent ones. A movie released in 1999 will appear before a movie released in 2020.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("asc(release_date)\n")])])]),s("p",[e._v("The following example will create a rule that makes movies with a good rank more relevant than movies with a lower rank. Movies with a higher ranking will appear first.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("desc(movie_ranking)\n")])])]),s("p",[e._v("To add a rule to the existing ranking rule, you have to add the rule to the existing ordered rules array using the "),s("RouterLink",{attrs:{to:"/references/ranking_rules.html#update-ranking-rules"}},[e._v("settings route")]),e._v(",")],1),e._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"typo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"attribute"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"proximity"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"words"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"wordsPosition"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"exactness"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"asc(release_date)"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"desc(movie_ranking)"')]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])])]),s("h2",{attrs:{id:"importance-of-the-attributes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#importance-of-the-attributes"}},[e._v("#")]),e._v(" Importance of the attributes")]),e._v(" "),s("p",[e._v("In a dataset, some fields are more relevant to the search than others. A "),s("code",[e._v("title")]),e._v(", for example, has a value more meaningful to a movie search than its "),s("code",[e._v("description")]),e._v(" or its "),s("code",[e._v("director")]),e._v(" name.")]),e._v(" "),s("p",[e._v("By default, the order of importance of the attributes is based on their order of appearance in the first document added. Then, each new attribute found in new documents will be added at the end of this ordered list.")]),e._v(" "),s("p",[e._v("If you wish to specify the order of the attributes you can either define them in the settings or set the correct order in the first document indexed.")]),e._v(" "),s("h3",{attrs:{id:"changing-the-order-of-the-attributes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#changing-the-order-of-the-attributes"}},[e._v("#")]),e._v(" Changing the order of the attributes")]),e._v(" "),s("p",[e._v("You may want to change the order once the documents have been ingested. This is still very possible using the "),s("RouterLink",{attrs:{to:"/guides/advanced_guides/field_properties.html#searchable-fields"}},[e._v("searchable attributes list")]),e._v(".")],1),e._v(" "),s("p",[e._v("Whenever a document is added to MeiliSearch, all new attributes found in it are automatically added to two lists:")]),e._v(" "),s("ul",[s("li",[s("strong",[e._v("The "),s("RouterLink",{attrs:{to:"/references/searchable_attributes.html"}},[e._v("searchable attributes list")])],1),e._v(": Attributes of the fields in which to search for matching query words.")]),e._v(" "),s("li",[s("strong",[e._v("The "),s("RouterLink",{attrs:{to:"/references/displayed_attributes.html"}},[e._v("displayed attributes list")])],1),e._v(": Attributes of the fields displayed in documents.")])]),e._v(" "),s("p",[e._v("This searchable attributes list is "),s("strong",[e._v("ordered")]),e._v(", which means the order in which the attributes appear in the list determines their relevancy. Attributes are arranged from the most important attribute to the least important attribute.")]),e._v(" "),s("p",[e._v("Place the attributes in the desired order and send this updated list using the "),s("RouterLink",{attrs:{to:"/references/settings.html"}},[e._v("settings routes")]),e._v(". Attributes will be re-ordered.")],1),e._v(" "),s("h4",{attrs:{id:"example-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-2"}},[e._v("#")]),e._v(" Example")]),e._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"title"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"description"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"director"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])])]),s("p",[e._v("If you take a look at the above order, the matching words found in "),s("code",[e._v("title")]),e._v(" will make the document more relevant than one with the same matching words found in "),s("code",[e._v("description")]),e._v(" or "),s("code",[e._v("director")]),e._v(".")])],1)}),[],!1,null,null,null);t.default=r.exports}}]);